# Week 8/12/25: Comparison Visualization Interface

**Milestone:** Build comparison visualization interface
**Status:** ✅ Completed
**Date:** 8 December 2025

## Overview

This milestone implements a comprehensive comparison visualization interface that allows users to upload two audio files, compare them using the similarity calculation algorithms developed in Week 1/12/25, and view detailed comparison results with visual elements.

## Features Implemented

### 1. Dual File Upload Interface

- **Side-by-side Upload Areas**: Two separate upload sections for File 1 and File 2
- **Drag-and-drop Support**: Both upload areas support drag-and-drop functionality
- **File Preview**: After upload, displays file metadata including:
  - Filename
  - Duration
  - Sample rate
  - Feature extraction confirmation

### 2. Comparison Button

- **Smart Display**: Only appears after both files are successfully uploaded
- **Visual Feedback**: Shows "Comparing..." state during API call
- **Auto-scroll**: Automatically scrolls to reveal the button when both files are ready

### 3. Similarity Score Display

- **Large Visual Card**: Prominent display of the overall similarity score
- **Percentage Score**: Large, easy-to-read percentage (0-100%)
- **Similarity Level**: Classification into five levels:
  - Very High (≥80%)
  - High (60-79%)
  - Moderate (40-59%)
  - Low (20-39%)
  - Very Low (<20%)
- **Descriptive Text**: User-friendly description of what the score means

### 4. Side-by-Side Waveform Comparison

- **Dual Waveforms**: Both audio files' waveforms displayed side-by-side
- **Synchronized Styling**: Consistent visual presentation for easy comparison
- **Audio Metadata**: Each waveform shows:
  - Filename
  - Duration
  - Sample rate

### 5. Detailed Metrics Display

Two metric cards showing comprehensive comparison data:

#### MFCC Comparison (Timbre/Texture)
- Cosine Similarity (with visual progress bar)
- DTW Distance
- Euclidean Distance

#### Chroma Comparison (Harmony/Melody)
- Cosine Similarity (with visual progress bar)
- DTW Distance
- Euclidean Distance

## Technical Implementation

### Frontend Architecture

**HTML Structure:**
- Modular sections for upload, comparison button, and results
- Responsive grid layout for side-by-side comparisons
- Semantic HTML for better accessibility

**CSS Styling:**
- Gradient-based color scheme (purple/blue)
- Card-based layout for information hierarchy
- Visual progress bars for similarity metrics
- Responsive design with mobile breakpoints
- Smooth transitions and animations

**JavaScript Functionality:**
- State management for uploaded files
- Reusable functions for file upload handling
- Asynchronous API calls with error handling
- Dynamic DOM manipulation for results display
- Canvas-based waveform rendering

### API Integration

The interface integrates with the existing backend API:

```javascript
// Upload endpoint
POST /api/upload
Response: { file_id, filename, duration, waveform, features, ... }

// Comparison endpoint
POST /api/compare
Body: { file_id_1, file_id_2 }
Response: { comparison: { overall_similarity, similarity_level, mfcc_comparison, chroma_comparison, ... } }
```

## File Structure

```
assignment47/
├── frontend/
│   └── index.html                      # Updated with comparison interface
├── backend/
│   ├── app.py                          # Backend API (unchanged)
│   ├── similarity_calculator.py        # Similarity algorithms (unchanged)
│   └── feature_extractor.py            # Feature extraction (unchanged)
└── WEEK_08_12_25.md                    # This documentation
```

## User Workflow

1. **Upload File 1**
   - User drags or selects first audio file
   - File is uploaded and features are extracted
   - Preview card shows file information

2. **Upload File 2**
   - User drags or selects second audio file
   - File is uploaded and features are extracted
   - Preview card shows file information
   - Compare button appears

3. **Compare Files**
   - User clicks "Compare Audio Files" button
   - System calls comparison API
   - Results are displayed automatically

4. **View Results**
   - Overall similarity score in large visual card
   - Side-by-side waveforms for visual comparison
   - Detailed MFCC and Chroma metrics

## Visual Design

### Color Scheme
- **Primary Gradient**: Purple to Blue (#667eea → #764ba2)
- **Secondary Gradient**: Teal to Green (#11998e → #38ef7d)
- **Background**: Light purple gradient
- **Cards**: White with subtle shadows

### Typography
- **Headers**: Segoe UI, 2.5em
- **Metrics**: Clear hierarchy with bold values
- **Descriptions**: Friendly, readable text

### Layout
- **Grid-based**: Responsive 2-column layouts
- **Card-based**: Information organized in visual cards
- **Progressive disclosure**: Results appear after comparison

## Performance Considerations

- **Efficient Waveform Rendering**: Uses downsampled data (1000 points)
- **Async Operations**: Non-blocking file uploads and comparisons
- **Lazy Loading**: Results only rendered when needed
- **Responsive Canvas**: Adapts to container size

## Testing

The interface was designed to work with the existing backend:

```bash
# Start backend server
cd backend
source venv/bin/activate
python app.py

# Access interface
# Open browser to http://localhost:5000
```

**Test Scenario:**
1. Upload two different audio files
2. Verify both file previews appear
3. Click compare button
4. Verify similarity score displays correctly
5. Check waveforms render side-by-side
6. Verify all metrics are displayed

## Future Enhancements

Potential improvements for future milestones:
- **Highlighted Sections**: Visual markers showing similar segments
- **Audio Playback**: Built-in players for listening to files
- **Export Results**: Download comparison report as PDF
- **Comparison History**: Save and review past comparisons
- **Batch Comparison**: Compare one file against multiple others

## Success Metrics

✅ **User Interface**
- Intuitive dual-file upload
- Clear visual feedback during operations
- Professional, modern design

✅ **Functionality**
- Successful integration with comparison API
- Accurate display of all metrics
- Smooth user workflow

✅ **Visualization**
- Clear presentation of similarity score
- Effective side-by-side waveform comparison
- Comprehensive metrics display

## Conclusion

The comparison visualization interface successfully implements all planned features for Week 8/12/25. It provides users with an intuitive way to compare audio files and understand their similarity through multiple visual elements and detailed metrics. The interface builds upon the previous milestones' work (upload, feature extraction, and similarity calculation) to create a cohesive user experience.

**Milestone Completion Date:** 8 December 2025
**Next Milestone:** Week 15/12/25 - Compile test dataset and begin initial accuracy testing
